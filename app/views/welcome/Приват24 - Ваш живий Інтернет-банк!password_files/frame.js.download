!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);n.n(r);n.o(r,"Loader")&&n.d(t,"Loader",function(){return r.Loader}),n.o(r,"Listener")&&n.d(t,"Listener",function(){return r.Listener})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.random().toString(36).substr(2,9)},a=function(){function e(){r(this,e),this.eventSplitter=/\s+/}return o(e,[{key:"on",value:function(e,t,n){return this.__ee_eventsApi(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){if(!this.__ee_eventsApi(this,"once",e,[t,n])||!t)return this;var r,i=this,o=function n(){if(r)return r;i.off(e,n),r=t.apply(this,arguments)};return o._callback=t,this.on(e,o,n)}},{key:"off",value:function(e,t,n){var r,i,o,s,a,u,l,c;if(!this._events||!this.__ee_eventsApi(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:Object.keys(this._events),a=0,u=s.length;a<u;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=r=[],t||n)for(l=0,c=o.length;l<c;l++)i=o[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){if(!this._events)return this;var t=Array.prototype.slice.call(arguments,1);if(!this.__ee_eventsApi(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&this.__ee_triggerEvents(n,t),r&&this.__ee_triggerEvents(r,arguments),this}},{key:"stopListening",value:function(e,t,n){var r=this._listeners;if(!r)return this;var o=!t&&!n;"object"===(void 0===t?"undefined":i(t))&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),o&&delete this._listeners[s];return this}},{key:"__ee_eventsApi",value:function(e,t,n,r){if(!n)return!0;if("object"===(void 0===n?"undefined":i(n))){for(var o in n)e[t].apply(e,[o,n[o]].concat(r));return!1}if(this.eventSplitter.test(n)){for(var s=n.split(this.eventSplitter),a=0,u=s.length;a<u;a++)e[t].apply(e,[s[a]].concat(r));return!1}return!0}},{key:"__ee_triggerEvents",value:function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}}},{key:"listenTo",value:function(e,t,n){return(this._listeners||(this._listeners={}))[e._listenerId||(e._listenerId=s("l"))]=e,"object"===(void 0===t?"undefined":i(t))&&(n=this),e.on(t,n,this),this}},{key:"listenToOnce",value:function(e,t,n){return(this._listeners||(this._listeners={}))[e._listenerId||(e._listenerId=s("l"))]=e,"object"===(void 0===t?"undefined":i(t))&&(n=this),e.once(t,n,this),this}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Listener=t.Loader=void 0;var i=n(2),o=r(i),s=n(3),a=r(s);t.Loader=o.default,t.Listener=a.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(n.options=e,!n.options.url){var o;return o=console.warn("FrameLoader: error missed frame URL"),i(n,o)}if(!n.options.el){var s;return s=console.warn("FrameLoader: error missed frame container"),i(n,s)}return"interactive"!==document.readyState&&"complete"!==document.readyState||n._initFrame(),n}return o(t,e),s(t,[{key:"_initFrame",value:function(){var e;if(this.options.el instanceof HTMLElement)this.el=this.options.el;else try{e=document.querySelector(this.options.el),this.el=e||null}catch(e){}return this.id=this.options.id||"frame"+this.options.url,this._loadFrame(),this}},{key:"_loadFrame",value:function(){var e,t=this;e=this.frame=document.createElement("iframe"),e.onload=function(){t._frameInteractive(),window.addEventListener("message",t._onMessage.bind(t))},e.src=this.options.url,e.setAttribute("frameborder",0),e.setAttribute("scrolling","no"),e.style.backgroundColor="transparent",this.el.appendChild(e)}},{key:"_frameInteractive",value:function(){var e=this,t=setInterval(function(){e.initSuccess?clearInterval(t):e.send(Object.assign({type:"__init",id:e.id}))},50)}},{key:"_onMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data||{};return t.id&&t.id===this.id?"__initSuccess"===t.type?(this.initSuccess=!0,"function"==typeof this.options.onLoad&&this.options.onLoad(this.frame),this.trigger("load",this.frame),this):(void 0!==t.style&&this._updateStyle(t.style),"function"==typeof this.options.onMessage&&this.options.onMessage(t),t.type&&this.trigger("message:"+t.type,t,e),void this.trigger("message",t,e)):this}},{key:"_updateStyle",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(e in t)t.hasOwnProperty(e)&&(this.frame.style[e]=t[e])}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Object.assign({},e,{id:this.id}),this.frame&&this.frame.contentWindow.postMessage(e,t.origin||"*"),this}},{key:"show",value:function(){this.el&&(this.el.style.display=this.elDisplayType||"block")}},{key:"hide",value:function(){this.el&&(this.elDisplayType=this.el.style.display||"block",this.el.style.display="none")}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.options=e,window.parent!==window&&n._listen(),n}return o(t,e),s(t,[{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Object.assign({},e,{id:this.id}),window.parent&&window.parent.postMessage(e,t.origin||"*"),this}},{key:"style",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.send({style:e})}},{key:"_listen",value:function(){var e=this;window.addEventListener("message",function(t){var n=t.data||{};"__init"===n.type?(e.id=n.id,e.send({type:"__initSuccess"}),"function"==typeof e.options.onLoad&&e.options.onLoad(),e.trigger("load")):e.id===n.id&&("function"==typeof e.options.onMessage&&e.options.onMessage(n),n.type&&e.trigger("message:"+n.type,n,t),e.trigger("message",n,t))})}}]),t}(u.default);t.default=l}])})},,,,function(e,t,n){"use strict";var r=n(0),i=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(i);window&&window.document&&window.addEventListener("DOMContentLoaded",function(){var e=function(){return new Promise(function(e){var t=(0,o.default)("userHash");t||(t=Math.random().toString(36).substr(2,9),(0,o.default)("userHash",t,{expires:3650})),e({userHash:t})})},t=new r.Listener({onMessage:function(){"get"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type&&e().then(function(e){return t.send(Object.assign({type:"fp"},e))})}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===t){var r=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),o=0;o<i.length;o++){var s=i[o].trim();if(s.substring(0,e.length+1)==e+"="){r=decodeURIComponent(s.substring(e.length+1));break}}return r}n=n||{},null===t&&(t="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+24*n.expires*60*60*1e3)):u=n.expires,a="; expires="+u.toUTCString()}var l=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",f=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,l,c,f].join("")}}]);
//# sourceMappingURL=frame.js.map