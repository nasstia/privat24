!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/build/",e(e.s=140)}({140:function(t,e,i){"use strict";var s=function(){};s.prototype.widgetVersion=20180122153350,s.prototype.staticPrefix="https://widget.sender.mobi/build/",s.prototype.disposed=!1,s.prototype.widgetIsReady=!1,s.prototype.hasInvite=!1,s.prototype.minHeight=400,s.prototype.minWidth=360,s.prototype.defaultOptions={embedTo:"",draggable:!0,resizable:!0,showButton:!0,autostart:!1,showBar:!0,showContactCard:!0,location:window.location.href,showPreloader:!1,showControls:!0},s.prototype.checkWidgetExist=function(t){return window["_"+t.companyId]===t.companyId},s.prototype.setCompanyIdToStorage=function(t){window["_"+t.companyId]=t.companyId},s.prototype.init=function(t){if(this.disposed=!1,this.checkWidgetExist(t))return!1;this.addStyleFile(document,"link",this.staticPrefix+this.widgetVersion+"/button.css"),this.loadFont(),this.addOptions(t),this.addStorageObject(),this.initElement(),this.createWrapper(document,"div"),this.initHandlers(),this.initAnalytics(document,"iframe","sender-analytics"),this.setCompanyIdToStorage(t)},s.prototype.restart=function(t,e){e||this.dispose(),this.init(Object.assign({},this.configOptions,t))},s.prototype.initElement=function(){var t;if(this.options.embedTo.length)try{t=document.querySelector(this.options.embedTo),this.el=t||null}catch(t){}},s.prototype.initHandlers=function(){this.onPageShowEvent=this.onPageShowEvent.bind(this),this.onResize=this.onResize.bind(this),window.addEventListener("pageshow",this.onPageShowEvent),window.addEventListener("beforeunload",this.beforeUnload),this.options.draggable&&!this.el&&this.addListener(this.wrapper.querySelector(".sender-widget-drag"),"mousedown",this.initDrag),this.options.resizable&&this.addListener(this.wrapper.querySelector(".sender-widget-resize"),"mousedown",this.initResize),this.el||window.addEventListener("resize",this.onResize),this.initPostMessageHandler()},s.prototype.initAnalytics=function(t,e,i){var s,n=t.getElementsByTagName("body")[0];s=t.createElement(e),s.id=i,s.src=this.staticPrefix+20180122153350+"/analytics.html",s.setAttribute("style","position: absolute; height: 1px; width: 1px; top:-1000px; background-color: transparent;"),s.setAttribute("scrolling","no"),s.setAttribute("frameborder",0),n.appendChild(s)},s.prototype.createIframe=function(t,e,i,s){var n,o=this.wrapper;n=t.createElement(e),n.className="sender-widget-frame",n.id=i,n.onload=function(){this.postOptions(Object.assign({},this.options,{defaultOptions:this.defaultOptions,configOptions:this.configOptions}))}.bind(this),n.src=this.staticPrefix+"index.html",n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.style.backgroundColor="transparent",o.appendChild(n),this.iframe=n},s.prototype.postOptions=function(t){var e,i=["embedTo","draggable","resizable","auth"],s=t,n="true"===sessionStorage.getItem("senderWidgetInitialized");e=this.parseGetParams(window.location.search);for(var o in s)-1!==i.indexOf(s[o])&&delete s.key;e&&(s=Object.assign(s,e,{forceReg:n})),this.postMessage({title:"initOptions",options:s})},s.prototype.parseGetParams=function(t){return t.replace(/^\?/,"").split("&").reduce(function(t,e){var i=e.split("=");return i[0]&&"auth"!==i[0]&&(t[i[0]]=decodeURIComponent(i[1])),t},{})},s.prototype.addStyleFile=function(t,e,i){var s,n=t.getElementsByTagName("head")[0];s=t.createElement(e),s.href=i,s.rel="stylesheet",s.type="text/css",n.appendChild(s)},s.prototype.createWrapper=function(t,e){var i,s=t.getElementsByTagName("body")[0];i=t.createElement(e),i.className="sender-wrapper sender-wrapper-"+this.options.companyId+" sender-hidden",this.el&&(s=this.el,i.style.width="100%",i.style.height="100%",i.classList.add("sender-embed")),s.appendChild(i),this.wrapper=i,this.options.height?this.setDefaultSizeParam("height",this.options.height):this.storage.getStateItem("height")||this.storage.setState({height:570}),this.options.width?this.setDefaultSizeParam("width",this.options.width):this.storage.getStateItem("width")||this.storage.setState({width:360}),this.options.draggable&&!this.el&&this.addDragControl(i),this.createIframe(document,"iframe","widget-frame-"+this.options.companyId,this.options),this.options.resizable&&this.addResizeControl(i),this.setWrapperSize()},s.prototype.setDefaultSizeParam=function(t,e){var i={},s="height"===t?this.minHeight:this.minWidth,n=e>=s?e:s;this.wrapper.style[t]=n+"px",i[t]=n,this.storage.getStateItem(t)||this.storage.setState(i)},s.prototype.compareWrapperHeight=function(){var t,e=window.innerHeight,i=this.storage.getStateItem("height");this.el||(i>e&&(t=e<this.minHeight?this.minHeight:e),t&&(this.wrapper.style.height=t+"px",this.storage.setState({height:t}),this.onWindowResize()))},s.prototype.setWrapperSize=function(){this.el||(this.storage.getStateItem("height")&&(this.wrapper.style.height=this.storage.getStateItem("height")+"px"),this.storage.getStateItem("width")&&(this.wrapper.style.width=this.storage.getStateItem("width")+"px"))},s.prototype.setWrapperPosition=function(){this.el||(this.storage.getStateItem("top")>=0&&(this.wrapper.style.top=this.storage.getStateItem("top")+"px"),this.storage.getStateItem("left")>=0&&(this.wrapper.style.left=this.storage.getStateItem("left")+"px"))},s.prototype.addDragControl=function(t){var e=document.createElement("div");e.className="sender-widget-drag",t.appendChild(e)},s.prototype.addResizeControl=function(t){var e=document.createElement("div");e.className="sender-widget-resize",e.style.background="url("+this.staticPrefix+"images/resize.png) no-repeat",t.appendChild(e)},s.prototype.addOptions=function(t){this.configOptions=t,this.options=Object.assign({},this.defaultOptions,t)},s.prototype.addStorageObject=function(){this.storage=new n({companyId:this.options.companyId}),this.storage.setDefaultState(),"true"===sessionStorage.getItem("senderWidgetInitialized")&&this.storage.cleanState()},s.prototype.addListener=function(t,e,i){t.addEventListener(e,i.bind(this),!1)},s.prototype.initResize=function(t){t.preventDefault(),t.stopPropagation(),this.createInvisibleLayer();var e=this.wrapper,i=t.clientX,s=t.clientY,n=e.offsetWidth,o=e.offsetHeight;this.minWidth,this.minHeight;setTimeout(function(){this.onresizeMouseMove({startX:i,startY:s,element:e,elementWidth:n,elementHeight:o})}.bind(this),0),e.onmouseup=function(){document.onmousemove=null,e.onmouseup=null,this.removeInvisibleLayer()}.bind(this)},s.prototype.initDrag=function(t){t.preventDefault(),t.stopPropagation(),this.createInvisibleLayer();var e=this.wrapper,i=e.querySelector(".sender-widget-drag"),s=e.getBoundingClientRect(),n=t.pageX-s.left,o=t.pageY-s.top,r=function(t){e.style.left=t.pageX-n+"px",this.storage.setState({left:t.pageX-n}),e.style.top=t.pageY-o+"px",this.storage.setState({top:t.pageY-o})}.bind(this);document.onmouseout=function(t){t=t||window.event;var e=t.relatedTarget||t.toElement,s=t.target||t.srcElement;e&&"HTML"!=e.nodeName||"IFRAME"===s.nodeName||this.onDragFinish(i)}.bind(this),e.ondragstart=function(){return!1},r(t),document.onmousemove=function(t){t.preventDefault(),t.stopPropagation(),r(t)},i.onmouseup=function(){this.onDragFinish(i)}.bind(this)},s.prototype.onDragFinish=function(t){document.onmousemove=null,document.onmouseout=null,this.removeInvisibleLayer(),t.onmouseup=null,this.moveAfterDrag()},s.prototype.onWindowResize=function(){if(this.wrapper){var t=this.wrapper.getBoundingClientRect();window.outerWidth-t.left-t.width<0&&(this.wrapper.style.left=window.outerWidth-t.width-15+"px",this.storage.setState({left:window.outerWidth-t.width-15})),t.top+t.height>window.innerHeight&&(this.wrapper.style.top="0px",this.storage.setState({top:0}))}},s.prototype.moveAfterDrag=function(){var t=this.wrapper,e=this.wrapper.getBoundingClientRect();if(e.top<0&&(t.style.top="0px",this.storage.setState({top:0})),e.left<0&&(t.style.left="0px",this.storage.setState({left:0})),window.outerWidth-e.left-e.width<0&&(t.style.left=window.outerWidth-e.width-15+"px",this.storage.setState({left:window.outerWidth-e.width-15})),window.outerHeight-e.top-e.height<0){var i=window.innerHeight-e.height;t.style.top=i<0?"0px":i+"px",this.storage.setState({top:i<0?0:i})}},s.prototype.onresizeMouseMove=function(t){document.onmousemove=function(e){var i,s,n,o;e.preventDefault(),e.stopPropagation(),t.elementWidth+(e.clientX-t.startX)<360&&t.elementHeight+(e.clientY-t.startY)<this.minHeight||window.innerWidth-e.clientX<5||window.innerHeight-e.clientY<5||(i=t.elementWidth+(e.clientX-t.startX),s=t.elementHeight+(e.clientY-t.startY),n=i>this.minWidth?i:this.minWidth,o=s>this.minHeight?s:this.minHeight,t.element.style.width=n+"px",t.element.style.height=o+"px",this.storage.setState({width:n}),this.storage.setState({height:o}))}.bind(this)},s.prototype.renderButton=function(t){if(!this.button&&(this.el||this.wrapper.classList.add(t.className),t.hasOwnProperty("showButton")&&(this.options=Object.assign({},this.options,{showButton:t.showButton})),this.options.showButton&&t.showButton)){var e=document.createElement("div"),i=document.createElement("div"),s=document.createElement("span"),n=document.createElement("a"),o=document.createElement("div"),r=document.createElement("div"),a=t.header.split(""),d=["left-bottom","left-center","left-top","right-bottom","right-center","right-top"];if(e.className="widget-button widget-button-"+this.options.companyId,i.className="widget-button-logo-wrapper",s.className="widget-button-logo",o.className="widget-button-text",r.className="widget-button-badge sender-hidden",r.appendChild(document.createTextNode("0")),e.classList.add(t.className),t.color&&(e.setAttribute("style","background-color:"+t.color+"!important;"),this.createArrowButtonStyle(t.color,t.className)),t.companyLogo?(s.style.backgroundImage="url("+t.companyLogo+")",s.style.backgroundSize="cover",s.style.backgroundColor="#fff"):s.style.backgroundImage="url("+this.staticPrefix+"images/company-logo.png)",-1!==d.indexOf(t.className))a.forEach(function(e){var i=document.createElement("span"),s=document.createTextNode(e);i.className="widget-button-text-char "+t.charClass,i.appendChild(s),o.appendChild(i)});else{var h=document.createTextNode(t.header);o.appendChild(h)}(this.options.autostart||this.storage.getStateItem("opened"))&&(e.classList.add("sender-hidden"),this.storage.setState({opened:!0})),i.appendChild(s),this.isMobile()?(n.setAttribute("target","_blank"),n.setAttribute("href",this.makeMobileLink()),n.setAttribute("style","display: inline-block!important; text-decoration: none!important;"),n.classList.add("sender-mobile-link"),n.appendChild(i),n.appendChild(o),e.appendChild(n)):(e.appendChild(i),e.appendChild(o)),e.appendChild(r),this.badge=r,document.body.appendChild(e),this.button=e,this.addListener(this.button,"click",this.toggleButton),this.isMobile()&&this.initMobileLinkHandler(".sender-mobile-link")}},s.prototype.createArrowButtonStyle=function(t,e){var i=document.createElement("style"),s={top:"border-bottom-color: ",left:"border-right-color: ",right:"border-left-color: ",bottom:"border-top-color: "},n=e.split("-")[0],o="";i.type="text/css",o+=".widget-button."+e+":after { "+s[n]+t+"!important; }.sender-invite-container."+e+":after { "+s[n]+"#fff!important;}",i.appendChild(document.createTextNode(o)),document.body.appendChild(i)},s.prototype.loadFont=function(){var t=document.createElement("link");t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href","https://fonts.googleapis.com/css?family=Roboto"),document.getElementsByTagName("head")[0].appendChild(t)},s.prototype.loadInviteStyle=function(){this.addStyleFile(document,"link",this.staticPrefix+this.widgetVersion+"/invite.css")},s.prototype.onLoadInviteFont=function(){this.addStyleFile(document,"link",this.staticPrefix+this.widgetVersion+"/invite.css")},s.prototype.renderInvite=function(t){if(t&&this.options.showButton){var e="",i=document.createElement("div");i.classList.add("sender-invite-container"),i.classList.add(t.invite_className),i.setAttribute("data-el","invite-container"),e+=this.renderInviteAvatar(t.invite_image),e+=this.renderTextWrapper(t),e+='<div class="sender-invite-close" data-el="sender-close"></div>',e+=this.renderTextareaWrapper(t),i.innerHTML=e,document.body.appendChild(i),this.addInviteHandlers(),this.isMobile()&&this.initMobileLinkHandler(".sender-mobile-invite-link"),this.hasInvite=!0}},s.prototype.onDialogFinish=function(){this.pubsub.publish("dialogFinish")},s.prototype.renderTextWrapper=function(t){return'<div class="sender-invite-text-wrapper">'+this.renderInviteNick(t.invite_nick)+this.renderInviteText(t.invite_text)+"</div>"},s.prototype.renderTextareaWrapper=function(t){var e='<div class="sender-invite-textarea-wrapper">',i='<div class="sender-invite-textarea"><textarea rows="1" data-el="sender-textarea" placeholder="'+t.invite_placeholder+'"></textarea></div>';return this.isMobile()&&(e+='<a target="_blank" href="'+this.makeMobileLink()+'" style="display: inline-block!important; text-decoration: none!important;" class="sender-mobile-invite-link">'),e+=i+this.renderInviteSend(t.color)+"</div>"},s.prototype.renderInviteNick=function(t){return'<div class="sender-invite-nick">'+t+"</div>"},s.prototype.renderInviteAvatar=function(t){return'<div class="sender-invite-avatar" style="background-image: url('+t+');"></div>'},s.prototype.renderInviteText=function(t){return'<div class="sender-invite-text">'+t+"</div>"},s.prototype.renderInviteSend=function(t){return'<div class="sender-invite-send" data-el="sender-send"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg width="22px" height="45px" viewBox="0 0 22 18"  style="display: inline-block; vertical-align: middle;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Welcome" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="button_close" transform="translate(-1198.000000, -843.000000)" fill="'+t+'"><g id="button3" transform="translate(917.000000, 756.000000)"><g id="Send-Bar" transform="translate(0.000000, 74.000000)"><g id="text" transform="translate(14.370370, 0.000000)"><polygon id="Shape" points="288 22 267 13 267 20 282 22 267 24 267 31"></polygon></g></g></g></g></g></svg></div>'},s.prototype.addInviteHandlers=function(){var t=document.querySelector('[data-el="sender-send"]'),e=document.querySelector('[data-el="sender-close"]'),i=document.querySelector('[data-el="sender-textarea"]');this.inviteSendHandler=this.onInviteSendClick.bind(this),this.inviteCloseHandler=this.onInviteCloseClick.bind(this),this.inviteKeydownHandler=this.onInviteKeydown.bind(this),this.addListener(t,"click",this.inviteSendHandler),this.addListener(e,"click",this.inviteCloseHandler),this.addListener(i,"keydown",this.inviteKeydownHandler)},s.prototype.onInviteSendClick=function(){var t=document.querySelector('[data-el="sender-textarea"]'),e="";(e=t.value)&&e.trim()&&(this.sendTextMessage(e.trim()),this.disposeInvite())},s.prototype.onInviteCloseClick=function(){this.disposeInvite(),this.postMessage({title:"inviteClosed"})},s.prototype.onInviteKeydown=function(t){t&&13===t.keyCode&&this.onInviteSendClick()},s.prototype.disposeInvite=function(){var t=document.querySelector('[data-el="invite-container"]');this.hasInvite&&t&&(this.removeInviteHandlers(),document.body.removeChild(t),this.hasInvite=!1)},s.prototype.removeInviteHandlers=function(){var t=document.querySelector('[data-el="sender-send"]'),e=document.querySelector('[data-el="sender-close"]'),i=document.querySelector('[data-el="sender-textarea"]');t&&t.removeEventListener("click",this.inviteSendHandler),e&&e.removeEventListener("click",this.inviteCloseHandler),i&&i.removeEventListener("keydown",this.inviteKeydownHandler)},s.prototype.toggleButton=function(t){return t&&t.forceOpen?(this.disposeInvite(),this.toggleWidget(!0),void(this.options.showButton&&this.button.classList.add("sender-hidden"))):this.options.showButton?void(this.button.classList.contains("sender-hidden")?this.showButton():(this.disposeInvite(),this.hideButton())):void this.toggleWidget()},s.prototype.postWidgetShow=function(){this.configOptions.welcomeRobotId||this.postMessage({title:"postWidgetShow",page:window.location.href})},s.prototype.postWidgetVisible=function(){this.postMessage({title:"widgetVisible"})},s.prototype.handleWidgetReadyEvent=function(){this.pubsub.publish("widgetIsReady"),this.widgetIsReady=!0,sessionStorage.setItem("senderWidgetInitialized",!0),setTimeout(function(){this.toggleWrapper(),this.compareWrapperHeight()}.bind(this),500),this.onFocusEvent=this.onFocusEvent.bind(this),window.addEventListener("focus",this.onFocusEvent)},s.prototype.beforeUnload=function(){sessionStorage.removeItem("senderWidgetInitialized")},s.prototype.onPageShowEvent=function(t){t&&t.persisted&&window.location.reload()},s.prototype.onResize=function(){this.onWindowResize(),this.compareWrapperHeight()},s.prototype.onFocusEvent=function(){setTimeout(function(){this.disposed||this.onInitStreams()}.bind(this),1e3),this.disposed&&this.isMobile()&&this.restart({},!0)},s.prototype.onInitStreams=function(){this.postMessage({title:"initStreams"})},s.prototype.sendTextMessage=function(t){if(t){var e=t.trim();this.postMessage({title:"sendTextMessage",text:e}),this.isMobile()||this.showWidget()}},s.prototype.handleNewMessageReceived=function(){var t,e=this.button.classList.contains("sender-hidden");this.pubsub.publish("newMessageReceived"),!e&&this.badge&&(t=this.badge.childNodes[0].nodeValue,this.badge.childNodes[0].nodeValue=Number(t)+1,this.badge.classList.remove("sender-hidden"))},s.prototype.handleUpdateHeight=function(t){t&&t.heightToSet&&(this.wrapper.style.height=t.heightToSet+"px",this.iframe.style.height=t.heightToSet+"px")},s.prototype.handleResetState=function(){this.storage.cleanState(),this.resetWrapperStyle()},s.prototype.disposeWidgetHandler=function(){this.dispose()},s.prototype.makeMobileLink=function(){var t=this.staticPrefix+"popup.html?";return Object.keys(this.options).forEach(function(e){this.options[e]&&(t+=e+"="+encodeURIComponent(this.options[e])+"&")}.bind(this)),t},s.prototype.resetWrapperStyle=function(){this.wrapper.style.height=this.options.height||"",this.wrapper.style.width=this.options.width||"",this.wrapper.style.left="",this.wrapper.style.top=""},s.prototype.toggleWidget=function(t){this.wrapper.classList.contains("sender-hidden")||t?this.showWidget(t):this.hideWidget()},s.prototype.hideWidget=function(){this.wrapper.classList.add("sender-hidden"),this.pubsub.publish("widgetIsHidden"),this.button&&this.button.classList.remove("sender-hidden")},s.prototype.showWidget=function(t){this.wrapper.classList.remove("sender-hidden"),this.onInitStreams(),this.postWidgetVisible(),this.button&&this.button.classList.add("sender-hidden"),this.storage.setState({opened:!0}),t||this.postWidgetShow()},s.prototype.showButton=function(){this.wrapper.classList.add("sender-hidden"),this.button.classList.remove("sender-hidden")},s.prototype.hideButton=function(){this.wrapper.classList.remove("sender-hidden"),this.button.classList.add("sender-hidden"),this.badge&&(this.badge.classList.add("sender-hidden"),this.badge.childNodes[0].nodeValue="0"),this.storage.setState({opened:!0}),this.onInitStreams(),this.postWidgetVisible(),this.postWidgetShow()},s.prototype.toggleWrapper=function(){(this.options.autostart||this.storage.getStateItem("opened"))&&(this.wrapper.classList.remove("sender-hidden"),this.postWidgetVisible()),this.options.autostart&&this.postWidgetShow(),this.setWrapperPosition()},s.prototype.createInvisibleLayer=function(){var t=document.createElement("div");t.className="sender-widget-layer",this.wrapper.querySelector(".sender-widget-layer")||this.wrapper.appendChild(t)},s.prototype.removeInvisibleLayer=function(){var t=this.wrapper.querySelector(".sender-widget-layer");t.parentNode.removeChild(t)},s.prototype.initPostMessageHandler=function(){this.postMessageFunction=this.postMessageHandler.bind(this),window.addEventListener("message",this.postMessageFunction)},s.prototype.initMobileLinkHandler=function(t){this.mobileLinkHandler=this.dispose.bind(this),this.addListener(document.querySelector(t),"click",function(t){t.stopPropagation(),this.mobileLinkHandler()}.bind(this))},s.prototype.postSiteEvent=function(t){this.postMessage({title:"siteEvent",actionData:t})},s.prototype.postMessageHandler=function(t){if(t.data&&t.data.title&&t.data.companyId===this.options.companyId)switch(t.data.title){case"renderButton":this.renderButton(t.data);break;case"toggleButton":this.toggleButton(t.data);break;case"widgetIsReady":this.handleWidgetReadyEvent();break;case"newMessageReceived":this.handleNewMessageReceived();break;case"updateHeight":this.handleUpdateHeight(t.data);break;case"resetState":this.handleResetState();break;case"restartWidget":this.restart({},!1);break;case"loadInviteFont":this.onLoadInviteFont();break;case"renderInvite":this.renderInvite(t.data);break;case"dialogFinish":this.onDialogFinish();break;case"hideWidget":this.hideWidget()}},s.prototype.postMessage=function(t){if(t.companyId=this.options.companyId,this.iframe){if(this.disposed)return;this.iframe.contentWindow.postMessage(t,"*")}},s.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},s.prototype.callRobot=function(t){this.postMessage({title:"callRobot",model:t})},s.prototype.showContactCard=function(){this.postMessage({title:"showContactCard"})},s.prototype.hideContactCard=function(){this.postMessage({title:"hideContactCard"})},s.prototype.resetWidget=function(){this.postMessage({title:"resetWidget"})},s.prototype.isReady=function(){return this.widgetIsReady},s.prototype.dispose=function(){this.disposed=!0,this.mobileLinkHandler&&document.querySelector(".sender-mobile-link").removeEventListener("click",this.mobileLinkHandler),this.badge&&(this.badge=null),this.button&&(document.body.removeChild(this.button),this.button=null),this.storage&&(this.storage.cleanState(),this.storage=null),this.el?this.el.removeChild(this.wrapper):document.body.removeChild(this.wrapper),this.wrapper=null,this.iframe=null,document.body.removeChild(document.querySelector("#sender-analytics")),this.postMessageFunction&&window.removeEventListener("message",this.postMessageFunction),this.onFocusEvent&&!this.isMobile()&&window.removeEventListener("focus",this.onFocusEvent),this.onPageShowEvent&&window.removeEventListener("pageshow",this.onPageShowEvent),this.onResize&&window.removeEventListener("resize",this.onResize),this.hasInvite&&this.disposeInvite(),window["_"+this.options.companyId]=null},s.prototype.on=function(t,e){this.pubsub.subscribe(t,e.bind(this))},s.prototype.off=function(t,e){this.pubsub.unsubscribe(t,e.bind(this))},s.prototype.trigger=function(t){this.pubsub.publish(t)},s.prototype.pubsub=function(t){var e={},i=-1;return t.subscribe=function(t,s){e[t]||(e[t]=[]);var n=(++i).toString();return e[t].push({token:n,func:s}),n},t.publish=function(t,i){return!!e[t]&&(setTimeout(function(){for(var s=e[t],n=s?s.length:0;n--;)s[n].func(t,i)},0),!0)},t.unsubscribe=function(t){for(var i in e)if(e[i])for(var s=0,n=e[i].length;s<n;s++)if(e[i][s].token===t)return e[i].splice(s,1),t;return!1},t}({});var n=function(t){this.companyId=t.companyId};n.prototype.setState=function(t){var e=JSON.parse(sessionStorage.getItem(this.companyId+"_state"))||{};sessionStorage.setItem(this.companyId+"_state",JSON.stringify(Object.assign(e,t)))},n.prototype.setDefaultState=function(){this.getState()||sessionStorage.setItem(this.companyId+"_state",JSON.stringify({}))},n.prototype.getState=function(){try{return JSON.parse(sessionStorage.getItem(this.companyId+"_state"))}catch(t){}},n.prototype.cleanState=function(){sessionStorage.setItem(this.companyId+"_state",JSON.stringify({}))},n.prototype.getStateItem=function(t){var e;return this.getState()&&(e=this.getState()[t]),e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var i=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(void 0!==n&&null!==n)for(var o=Object.keys(Object(n)),r=0,a=o.length;r<a;r++){var d=o[r],h=Object.getOwnPropertyDescriptor(n,d);void 0!==h&&h.enumerable&&(i[d]=n[d])}}return i}}),window.SenderWidget=new s,window.senderCallback&&window.senderCallback(window.SenderWidget)}});